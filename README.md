# Cloud Hackathon

* [Cloud Hackathon](#cloud-hackathon)
   * [ã¯ã˜ã‚ã«](#ã¯ã˜ã‚ã«)
   * [Githubã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ](#githubã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ)
      * [æ–°è¦ç™»éŒ²](#æ–°è¦ç™»éŒ²)
      * [APIãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—](#apiãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—)
   * [ãã‚‚ãã‚‚Gitã¨ã¯?](#ãã‚‚ãã‚‚gitã¨ã¯)
      * [ãƒãƒ¼ãƒ é–‹ç™ºã¨Github](#ãƒãƒ¼ãƒ é–‹ç™ºã¨github)
      * [ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ](#ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ)
      * [ã‚‚ã£ã¨Gitã‚’çŸ¥ã‚‹ã«ã¯?](#ã‚‚ã£ã¨gitã‚’çŸ¥ã‚‹ã«ã¯)
   * [ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†](#ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†)
      * [é–‹ç™ºç’°å¢ƒã«ãƒ­ã‚°ã‚¤ãƒ³!](#é–‹ç™ºç’°å¢ƒã«ãƒ­ã‚°ã‚¤ãƒ³)
   * [ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹](#ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹)
   * [ã‚³ãƒ³ãƒ†ãƒŠã¨ã¯?](#ã‚³ãƒ³ãƒ†ãƒŠã¨ã¯)
   * [Dockerã¨ã¯?](#dockerã¨ã¯)
      * [Dockerã®æ¦‚è¦](#dockerã®æ¦‚è¦)
      * [Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã£ã¦ã¿ã‚ˆã†](#dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã£ã¦ã¿ã‚ˆã†)
      * [ã‚³ãƒ³ãƒ†ãƒŠã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã«ã¯?](#ã‚³ãƒ³ãƒ†ãƒŠã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã«ã¯)
   * [ã‚³ãƒ³ãƒ†ãƒŠã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†](#ã‚³ãƒ³ãƒ†ãƒŠã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†)
   * [é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«ã‚’å›ã—ã¦ã¿ã‚ˆã†](#é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«ã‚’å›ã—ã¦ã¿ã‚ˆã†)
   * [ãã®ä»–](#ãã®ä»–)
      * [é–‹ç™ºãƒã‚·ãƒ³æƒ…å ±](#é–‹ç™ºãƒã‚·ãƒ³æƒ…å ±)
      * [ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ä¸€è¦§](#ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ä¸€è¦§)


## ã¯ã˜ã‚ã«

ã“ã‚Œã‹ã‚‰ã€çš†ã•ã‚“ã«ã¯ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½¿ã£ãŸé–‹ç™ºã‚’æ‰‹ã‚’å‹•ã‹ã—ã¤ã¤è©¦ã—ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚  
ä»¥ä¸‹ã‚’å‰æã«é€²ã‚ã¾ã™ã®ã§ã”ç¢ºèªãã ã•ã„ã€‚  
ä½•ã‹ã‚ã‚Šã¾ã—ãŸã‚‰ã€å‘¨ã‚Šã®ã‚¹ã‚¿ãƒƒãƒ•åˆã¯Slackã§ã”è³ªå•ãã ã•ã„ã€‚

* æŒ‡å®šã•ã‚ŒãŸWi-Fiã«æ¥ç¶šã—ã¦ã„ã‚‹ã“ã¨
* è‡ªåˆ†ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸãƒãƒ¼ãƒ åãŒã‚ã‹ã‚‹ã“ã¨
* ãƒãƒ¼ãƒ ã®Slackãƒãƒ£ãƒãƒ«ã«å‚åŠ ã—ã¦ã„ã‚‹ã“ã¨
* SSHå¯èƒ½ãªã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãŒèµ·å‹•ã§ãã‚‹ã“ã¨

## Githubã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ

ã‚³ãƒ³ãƒ†ãƒŠã‚’å‹•ã‹ã™ãã®å‰ã«...ã€‚  
ä»Šå›ã¯ã€ã‚³ãƒ¼ãƒ‰ã®ç®¡ç†ã«[Github][1]ã‚’ä½¿ç”¨ã™ã‚‹ã®ã§å…ˆã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ã„ãã¾ã™ã€‚  
ã™ã§ã«å–å¾—æ¸ˆã¿ã®æ–¹ã¯ã€æ–°è¦ç™»éŒ²ã‚’é£›ã°ã—ã¦[APIãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—](#APIãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—)ã‚’ã—ã¦ãã ã•ã„ã€‚  

### æ–°è¦ç™»éŒ²

1. [Github Sign up][3]ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼å, ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹, ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ã—ã¦ `Create an account` ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ—ãƒ©ãƒ³é¸æŠã§ã¯`Free`ã§OK
4. ç™»éŒ²ã—ãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ç™»éŒ²ç¢ºèªãƒ¡ãƒ¼ãƒ«ãŒå±Šã„ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
5. ç™»éŒ²ç¢ºèªç”¨URLã‚’ã‚¯ãƒªãƒƒã‚¯
6. å®Œäº†ğŸ‘

### APIãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—

1. [Settings - Token][4] ã«ã‚¢ã‚¯ã‚»ã‚¹
2. å³ä¸Šã®`Generate new token`ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã€Token descriptionã€ã«ã¯é©å½“ãªèª¬æ˜ã‚’å…¥åŠ›
4. scopeã¯ä¸€ç•ªä¸Šã®`repo`(Full control of private repositories)ã‚’é¸æŠ
5. `Generate token`ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
6. è¡¨ç¤ºã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä¿å­˜(ã‚ã¨ã§ä½¿ã„ã¾ã™!)

## ãã‚‚ãã‚‚Gitã¨ã¯?

[Git][5]ã¯ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®åˆ†æ•£ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚  
v1ã§ä¿å­˜ã—ãŸã‚ã¨é–‹ç™ºãŒé€²ã¿v3ã«ã€‚é€”ä¸­ã§v1ã®æ–¹ãŒã‚ˆã‹ã£ãŸãªã¨æ€ã£ãŸã‚‰ã™ãã«v1ã«æˆ»ã™ã“ã¨ãŒã§ãã¾ã™ã€‚  
ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€Linuxã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã«[ãƒªãƒ¼ãƒŠã‚¹][6]ã•ã‚“ã«ã‚ˆã£ã¦é–‹ç™ºã•ã‚Œã¾ã—ãŸã€‚  
å…ˆã»ã©ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ãŸ[Github][1]ã¯ã€ã“ã®Gitã®ä»•çµ„ã¿ã‚’åˆ©ç”¨ã—ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä¿å­˜/å…¬é–‹ã§ãã‚‹ã‚ˆã†ã«ã—ãŸWebã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚

### ãƒãƒ¼ãƒ é–‹ç™ºã¨Github

![git](img/git.png)

Gitã¯ã€1äººã‚ˆã‚Šã‚‚ãƒãƒ¼ãƒ é–‹ç™ºã§ä½¿ç”¨ã™ã‚‹ã¨ã‚ã‚ŠãŒãŸã¿ãŒå¢—ã—ã¾ã™ã€‚  
ãã‚Œã¯ã€ãƒãƒ¼ãƒ ã®ãƒ¡ãƒ³ãƒãƒ¼ãŒä¸¦è¡Œã—ã¦åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦ä¿®æ­£ã‚’åŠ ãˆã¦ã‚‚  
ä»–ã®ãƒ¡ãƒ³ãƒãƒ¼ã®ä¿®æ­£å†…å®¹ã‚’å–ã‚Šè¾¼ã‚€ãŸã‚ã®ä¾¿åˆ©ãªæ©Ÿèƒ½ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚  

> [Git flow][9]ã¨ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹ç™ºã«ä¾¿åˆ©ãªGitã®ä½¿ã„æ–¹ãŒã‚ã‚Šã€
> å¼Šç¤¾å«ã‚ã“ã®æ–¹æ³•ã§é–‹ç™ºã—ã¦ã„ã‚‹ã¨ã“ã‚ãŒå¤šã„ã§ã™

### ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ

ä»Šå›ã®ãƒãƒƒã‚«ã‚½ãƒ³ã§ä½¿ã‚ã‚Œã‚‹ã¨æ€ã‚ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã ã‘ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ã¿ã¾ã—ãŸã€‚  
ä»–ã«ã‚„ã‚ŠãŸã„ã“ã¨ãŒã‚ã‚Œã°ã€ã‚¹ã‚¿ãƒƒãƒ•ã«èã„ã¦ã¿ã¦ãã ã•ã„ã€‚

* Gitã®è¨­å®š

   ```
   $ git config --global user.name <YOUR NAME>
   $ git config --global user.email <YOUR EMAIL>
   ```

* ãƒªãƒ¢ãƒ¼ãƒˆ(Githubã¨ã‹)ã‹ã‚‰ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

   ```
   $ git clone <REPOSITORY PATH>
   ```
   
> cloneã™ã‚‹ã¨ãã®Repositoryã®å½¢å¼ã§èªè¨¼æ–¹æ³•ãŒå¤‰ã‚ã‚Šã¾ã™
> â–  SSHã‚’ä½¿ã†å ´åˆ(éµã¯~/.ssh/id_rsa, ã‚‚ã—ãã¯~/.ssh/configã§æŒ‡å®šã—ãŸã‚‚ã®)
> $ git clone git@github.com:{ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ}/{ãƒªãƒã‚¸ãƒˆãƒªå}.git
> â–  HTTPSã‚’ä½¿ã„éƒ½åº¦Loginã™ã‚‹å ´åˆ
> $ git clone https://github.com/{ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ}/{ãƒªãƒã‚¸ãƒˆãƒªå}.git
> â–  HTTPSã‚’ä½¿ã„Tokenã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ
> $ git clone https://{ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ}:{ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³}@github.com/{ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ}/{ãƒªãƒã‚¸ãƒˆãƒªå}

* ãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ (ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç™»éŒ²)

   ```
   # æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ 
   $ git add <FILE NAME>
   # ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ 
   $ git add --all
   ```

* å¤‰æ›´å†…å®¹ã‚’ç¢ºå®šã•ã›ã‚‹(ã‚³ãƒŸãƒƒãƒˆ)

   ```
   $ git commit -m '<MESSAGE>'
   ```

* å¤‰æ›´å†…å®¹ã‚’ãƒªãƒ¢ãƒ¼ãƒˆã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

   ```
   $ git push origin <BRANCH_NAME>
   ```
   
* ã™ã¹ã¦ã®å¤‰æ›´å†…å®¹ã‚’ãƒªãƒ¢ãƒ¼ãƒ‰ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

   ```
   $ git pull
   ```

### ã‚‚ã£ã¨Gitã‚’çŸ¥ã‚‹ã«ã¯?

ä»Šå›ã®èª¬æ˜å†…å®¹ã¯ã„ã‚ã„ã‚ãªæƒ…å ±ã‚’çœã„ã¦ã„ã‚‹(éæ¨å¥¨ãªã“ã¨ã‚‚ã‚„ã£ã¦ã„ã‚‹)ã®ã§ã€  
Gitã‚’æœ¬æ ¼çš„ã«ä½¿ã£ã¦ã¿ãŸã„ãªã¨æ€ã£ãŸæ–¹ã¯ã€ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã‚„æœ¬ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚  
ç‰¹ã«æœ¬ã®æ–¹ã¯ãƒãƒ¼ãƒ é–‹ç™ºã§ã®æµã‚Œã‚’è¿½ã„ã¤ã¤ãã“ã§å¿…è¦ãªGitã‚’å­¦ã¹ã‚‹ã®ã§å„ªç§€ã§ã™ã€‚

* [ã‚µãƒ«ã§ã‚‚åˆ†ã‹ã‚‹Gitå…¥é–€][7]
* [Gitã«ã‚ˆã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†][8]

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†

### é–‹ç™ºç’°å¢ƒã«ãƒ­ã‚°ã‚¤ãƒ³!

å„ãƒãƒ¼ãƒ ã”ã¨ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã¯ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ã”è¦§ãã ã•ã„ã€‚

```
$ ssh ninja@<YOUR TEAM ADDRESS>
```

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹

ãƒãƒƒã‚«ã‚½ãƒ³ç”¨ã«ã„ãã¤ã‹ã®[ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰](ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ä¸€è¦§)ã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚  
è¨€èªåˆ¥ã«ãƒ¬ãƒã‚¸ãƒˆãƒªãŒåˆ†ã‹ã‚Œã¦ã„ã‚‹ã®ã§ãŠå¥½ããªã‚‚ã®ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚  
ãŸã ã—ã€è¨€èªã«ã‚ˆã£ã¦ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã®å†…å®¹ãŒé•ã„ã¾ã™ã€‚  

* [golang-apps][0]: Revelã‚’ä½¿ã£ãŸãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒª
* [javascript-apps][10]: Hubotã‚’ä½¿ã£ãŸãƒœãƒƒãƒˆã‚¢ãƒ—ãƒª
* [ruby-apps][22]: Railsã‚’ä½¿ã£ãŸãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒª
* [python-apps][23]: Djangoã‚’ä½¿ã£ãŸãƒ•ãƒ„ãƒ¼ã®Webã‚¢ãƒ—ãƒª

ã§ã¯ã€è©¦ã—ã«[python-apps][23]ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  
å…ˆã»ã©èª¬æ˜ã—ãŸ`git clone`ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚  
æ–¹å¼ãŒå¹¾ã¤ã‹ã‚ã‚Šã¾ã™ãŒã€æ¥½&èª°ã§ã‚‚å…¥ã‚Œã‚‹VMãªã®ã§Tokenå½¢å¼ãŒã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚  

```
$ git clone https://github.com/cloud-hackathon/python-apps.git
```

æ—©é€Ÿå‹•ã‹ã—ãŸã„ã¨ã“ã‚ã§ã™ãŒã€å…ˆã«Dockerã«ã¤ã„ã¦ã”èª¬æ˜ã—ã¾ã™ã€‚  


## ã‚³ãƒ³ãƒ†ãƒŠã¨ã¯?

ã‚³ãƒ³ãƒ†ãƒŠã¨ã¯ã€OSä¸Šã«éš”é›¢ã•ã‚ŒãŸç©ºé–“(ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹)ã‚’ä½œæˆã—ã€ãã®ä¸­ã§åˆ¥ã®ç’°å¢ƒã‚’å®Ÿè¡Œã§ãã‚‹æŠ€è¡“ã§ã™ã€‚  
ã‚³ãƒ³ãƒ†ãƒŠã«ã¯CPUã‚„ãƒ¡ãƒ¢ãƒªãªã©ã®ãƒªã‚½ãƒ¼ã‚¹ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã€ãƒ—ãƒ­ã‚»ã‚¹ã®å®Ÿè¡Œç’°å¢ƒãŒåˆ†é›¢ã•ã‚Œã¾ã™ã€‚  
(namespaceã‚„cgroupsã¨ã„ã†Linuxã‚«ãƒ¼ãƒãƒ«ã®æŠ€è¡“ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚)

[VMWare Player][18]ã‚„[Oracle VirtualBox][19]ãªã©ã®ãƒã‚¤ãƒ‘ãƒ¼ãƒã‚¤ã‚¶å‹ã®ä»®æƒ³åŒ–ã¨æ¯”è¼ƒã—ã¦é«˜é€Ÿãƒ»è»½é‡ã¨ã„ã†ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚
ãƒã‚¤ãƒ‘ãƒ¼ãƒã‚¤ã‚¶ã§ã¯ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ã¦ä»®æƒ³ãƒã‚·ãƒ³ã‚’å‹•ä½œã•ã›ã¦ã„ã‚‹ãŸã‚ã€  
ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒå¤§ãããªã‚ŠãŒã¡ã§ã™ã€‚

ã‚³ãƒ³ãƒ†ãƒŠã§ã¯ã‚«ãƒ¼ãƒãƒ«(OSã®åŸºæœ¬çš„ãªéƒ¨åˆ†)ã‚’å…±æœ‰ã—å®Ÿè¡Œç’°å¢ƒã‚’åˆ†é›¢ã—ã¦ã„ã‚‹ã ã‘ãªã®ã§ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒå°ã•ã„ã§ã™ã€‚  
ãã®ãŸã‚ã€èµ·å‹•ãƒ»åœæ­¢ãŒé«˜é€Ÿã ã£ãŸã‚Šã€1å°ã®ã‚µãƒ¼ãƒä¸Šã§å¤§é‡ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’å‹•ã‹ã—ãŸã‚Šã§ãã¾ã™ã€‚

![container](img/container.jpg)

* [ã‚³ãƒ³ãƒ†ãƒŠæŠ€è¡“ã®åŸºç¤çŸ¥è­˜][11]
* [æ³¨ç›®ã‚’æµ´ã³ã‚‹ã€ŒDockerã‚³ãƒ³ãƒ†ãƒŠã€ã€å¾“æ¥ã®ä»®æƒ³åŒ–ã¨ä½•ãŒé•ã†ã®ã‹ï¼Ÿ][12]

## Dockerã¨ã¯?

### Dockerã®æ¦‚è¦

ğŸ³ [Docker][13]ã¨ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’å‹•ã‹ã™ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã™ã€‚  
ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­èº«(Dockerã‚¤ãƒ¡ãƒ¼ã‚¸)ã‚’ä½œã‚‹ä»•çµ„ã¿ã‚„ã€ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œç’°å¢ƒã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚  

Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã¨ã—ã¦å‹•ã‹ã™OSã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚  
è»½é‡ã§ã©ã“ã§ã‚‚åŒã˜ã‚ˆã†ã«å‹•ãã¨ã„ã†ç‰¹å¾´ãŒã‚ã‚‹ãŸã‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é…å¸ƒã™ã‚‹ã®ã«å‘ã„ã¦ã„ã¾ã™ã€‚  
[Docker Hub][16]ã¨ã„ã†Webã‚µã‚¤ãƒˆãŒã‚ã‚Šã€æ§˜ã€…ãªDockerã‚¤ãƒ¡ãƒ¼ã‚¸ãŒå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚  

![container_as_a_service](img/container_as_a_service.png)

* [å··ã§è©±é¡Œã®Dockerã¨ã¯?][14]
* [Containers As A Service (CaaS) As Your New Platform For Application Development And Operations][17]

### Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã£ã¦ã¿ã‚ˆã†

Dockerfileã‚’ä½¿ãˆã°ã€Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ç°¡å˜ã«ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚  
ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æŒ‡å®šã—ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚‹ãŸã‚ã«å¿…è¦ãªã‚³ãƒãƒ³ãƒ‰ã‚’è¨˜è¿°ã—ã¾ã™ã€‚  
ä¾‹ãˆã°ã€[Ubuntu][20]ä¸Šã§ `hello-world.rb` ã¨ã„ã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å‹•ã‹ã™ã‚³ãƒ³ãƒ†ãƒŠã‚’è€ƒãˆã¾ã™ã€‚  
Rubyã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ³ãƒ†ãƒŠã«è¿½åŠ ã™ã‚‹ã ã‘ã§å®Œæˆã§ã™ã€‚  

```dockerfile
FROM ubuntu:16.04

RUN apt-get update && \
    apt-get -y upgrade && \
    apt-get -y install ruby

ADD hello-world.rb

CMD ruby hello-world.rb
```

```
$ docker build -t hello-world .
$ docker run hello-world
```

* [Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ç†è§£ã¨ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«][15]

### ã‚³ãƒ³ãƒ†ãƒŠã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã«ã¯?

Dockerã§ã¯ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã«ã€ã‚³ãƒ³ãƒ†ãƒŠã§å®Ÿè¡Œã™ã‚‹æ©Ÿèƒ½ã‚’å°ã•ãã—ã‚ˆã†ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚
ä¾‹ãˆã°Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆã€ã‚¢ãƒ—ãƒªç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠã¨ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠã¯åˆ†ã‘ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚
ã“ã®ã‚ˆã†ã«è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠã§æ§‹æˆã•ã‚Œã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’å‹•ã‹ã—ãŸã„ã¨ãã«ä¾¿åˆ©ãªã®ãŒ[Docker Compose][16]ã§ã™ã€‚
docker-composeã‚’ä½¿ã†ã“ã¨ã§ã€è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ä¸€åº¦ã«èµ·å‹•ã§ãã‚‹ã ã‘ã§ãªãã€ä¾å­˜é–¢ä¿‚ã®è§£æ±ºã‚‚ã—ã¦ãã‚Œã¾ã™ã€‚
(å…ˆã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¦ã‹ã‚‰ã€ã‚¢ãƒ—ãƒªç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹ãªã©ã€‚)

èµ·å‹•ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠã¨ãã®è¨­å®šã¯ `docker-compose.yml` ã¨ã„ã†[YAML][21]å½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã—ã¾ã™ã€‚
ä¾‹ãˆã° `web` ã¨ `database` ã¨ã„ã†ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã«ãªã‚Šã¾ã™ã€‚
`web` ã§ã¯8080ç•ªãƒãƒ¼ãƒˆãŒæ¥ç¶šã•ã‚Œã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒ `/code` ã«ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¾ã™ã€‚
ã¾ãŸã€ `web` ãŒä¾å­˜ã™ã‚‹ `database` ãŒå…ˆã«èµ·å‹•ã•ã‚Œã¾ã™ã€‚

```yaml
version: '2'
services:
  web:
    build: .
    ports:
      - "8080:8080"
    volumes:
      - "$PWD:/code"
    depends_on:
      - database
  database:
    image: mysql
```

## ã‚³ãƒ³ãƒ†ãƒŠã‚’å‹•ã‹ã—ã¦ã¿ã‚ˆã†

ã§ã¯ã€ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  
ã¾ãšã¯å…ˆã»ã©ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸ`django-plane`ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™ã€‚  

```
$ cd python-apps/django-plane
$ ls
Dockerfile  README.md  docker-compose.yaml  img  src
$ cat docker-compose.yaml
version: '2'
services:
  web:
    build: .
    ports:
      - "8080:8080"
    volumes:
      - "$PWD/src:/code"
```

ã“ã® `docker-compose.yaml` ã‚’ å®Ÿè¡Œã™ã‚‹ã«ã¯ã€`docker-compose up`ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚  

```
$ docker-compose up

# ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹Dockerfileã®ãƒ“ãƒ«ãƒ‰
Building web
Step 1 : FROM python:2.7.13-alpine
 ---> c80455665c57
Step 2 : ENV PYTHONUNBUFFERED 1

~~ çœç•¥ ~~~

Step 8 : ENTRYPOINT /code/docker-entrypoint.sh
 ---> Using cache
 ---> 97aa91549ddf
Successfully built 97aa91549ddf

# djangoã®èµ·å‹•(ä»¥ä¸‹Log)
Starting djangoplane_web_1
Attaching to djangoplane_web_1
web_1  | + ./projectname/manage.py migrate
web_1  | Operations to perform:
web_1  |   Synchronize unmigrated apps: staticfiles, home, django_extensions, messages, compressor
```

ã“ã‚Œã ã‘ã§Djangoã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒç«‹ã¡ä¸ŠãŒã‚Šã¾ã—ãŸã€‚  
å®Ÿéš›ã«ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰`http://<VM IP ADDRESS>:8080`ã‚’ã¿ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  

ã“ã®ã‚ˆã†ãªç”»é¢ãŒè¦‹ãˆã¾ã—ãŸã‹?  
ä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„ãªã©ã€ä½•ã‹å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã‚‰ãŠè¿‘ãã®ã‚¹ã‚¿ãƒƒãƒ•ã¾ã§ãŠå£°ãŒã‘ãã ã•ã„ã€‚  

![django](https://github.com/cloud-hackathon/python-apps/blob/master/django-plane/img/screenshot.png)


## é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«ã‚’å›ã—ã¦ã¿ã‚ˆã†

### åŸºæœ¬çš„ãªæµã‚Œ

1. ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
1. docker-composeã§èµ·å‹•
1. ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£
1. docker-composeã§å†èµ·å‹•
1. ä»¥é™3,4ã‚’ç¹°ã‚Šè¿”ã™

### ã‚³ãƒ¼ãƒ‰ã®ä¿®æ­£æ–¹æ³•

ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ãƒãƒ¼ãƒ ã§å¥½ããªã‚„ã‚Šæ–¹ã‚’æ±ºã‚ã¦ãã ã•ã„ã€‚

1. VMå†…ã«å…¥ã£ã¦ç›´æ¥ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã™ã‚‹
  * Pros. ãã®ã¾ã¾å®Ÿè¡Œ&ç¢ºèªã§ãã‚‹
  * Cons. ã‚¨ãƒ‡ã‚£ã‚¿...
1. ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚¨ãƒ‡ã‚£ã‚¿ã§ä¿®æ­£ã—ã¦GitçµŒç”±ã§ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°ã™ã‚‹
  * Pros. æ™®æ®µã®ç’°å¢ƒã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã‚‹
  * Cons. Gitã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚‹ç¨‹åº¦ä½¿ãˆã‚‹ã“ã¨ & å‹•ä½œç¢ºèªã«æ™‚é–“ãŒã‹ã‹ã‚‹)
1. ã‚¨ãƒ‡ã‚£ã‚¿ã®ãƒªãƒ¢ãƒ¼ãƒˆç·¨é›†æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ç›´æ¥ã‚µãƒ¼ãƒãƒ¼ä¸Šã®ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã™ã‚‹
  * Pros. æ™®æ®µã®ç’°å¢ƒã§ã‚³ãƒ¼ãƒ‰ãŒæ›¸ã‘ã‚‹ & ã‚µãƒ¼ãƒä¸Šã§å‹•ä½œç¢ºèªå¯èƒ½
  * Cons. ã‚¨ãƒ‡ã‚£ã‚¿ã«ã‚ˆã£ã¦ã‚„ã‚Šæ–¹ãŒé•ã†

### å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã‚ˆã†

åŸºæœ¬çš„ãªæµã‚ŒãŒã‚ã‹ã£ãŸã¨ã“ã‚ã§ã€å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚  
(ã¾ã Djangoã‚¢ãƒ—ãƒªãŒèµ·å‹•ä¸­ã®æ–¹ã¯`Ctrl-C`ã§åœæ­¢ã—ã¦ãã ã•ã„ã€‚)  
`views.py`ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã€ãƒ›ãƒ¼ãƒ ç”»é¢ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¤‰ãˆã¦ã¿ã¾ã™ã€‚

```
$ vi src/projectname/home/views.py
```

ã¨ã‚Šã‚ãˆãš`Hello World!`ã«ã—ã¦ã¿ã¾ã—ãŸã€‚

```
$ git diff
diff --git a/django-plane/src/projectname/home/views.py b/django-plane/src/projectname/home/views.py
old mode 100644
new mode 100755
index 3ad2890..9a0112a
--- a/django-plane/src/projectname/home/views.py
+++ b/django-plane/src/projectname/home/views.py
@@ -6,6 +6,6 @@ class HomeView(TemplateView):

     def get(self, request, *args, **kwargs):
         context = {
-            'some_dynamic_value': 'This text comes from django view!',
+            'some_dynamic_value': 'Hello World!',
         }
-        return self.render_to_response(context)
\ No newline at end of file
+        return self.render_to_response(context)

```

å†ã³`docker-compose up`ã‚’å®Ÿè¡Œã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¦ãã ã•ã„ã€‚  
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚  

èª¬æ˜ã¯ä»¥ä¸Šã«ãªã‚Šã¾ã™ã€‚  
ä½•ã‹ã‚ã‚Šã¾ã—ãŸã‚‰é æ…®ãªãã‚¹ã‚¿ãƒƒãƒ•ã«ãŠèããã ã•ã„ã€‚  
Happy Hacking!  


## ãã®ä»–

### ã‚ˆãã‚ã‚Šãã†ãªQ&A

* ä¿®æ­£ã—ãŸã®ã«å¤‰æ›´ãŒåæ˜ ã•ã‚Œãªã„
  > Dockerfileã‚„ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å¤‰æ›´ã—ã¦ã„ã‚‹å ´åˆã¯
  > ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å†ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚`docker-compose up --build` ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚

* ãƒ­ãƒ¼ã‚«ãƒ«ã§curlã‚’å©ã„ã¦ã‚‚`æ¥ç¶šãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸ`ã¨è¡¨ç¤ºã•ã‚Œã‚‹
  > ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒ`127.0.0.1`ã«ãªã£ã¦ã„ã¾ã›ã‚“ã‹?
  > ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹å ´åˆã¯`0.0.0.0`ã§èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
  
* ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰è¡¨ç¤ºã•ã‚Œãªã„  
  > èµ·å‹•ã™ã‚‹ãƒãƒ¼ãƒˆç•ªå·ã¯æ­£ã—ã„ã§ã™ã‹?
  > æœ¬ç’°å¢ƒã§ã¯ã€ãƒãƒ¼ãƒˆ8080-8089ç•ªã®ã¿è¨±å¯ã•ã‚Œã¦ã„ã¾ã™ã€‚

### é–‹ç™ºãƒã‚·ãƒ³æƒ…å ±

Name|Value
----|-----
VM|[Cloudn FLAT Compute][2] / 2CPU / 4GB RAM / 15G DISK
OS|Ubuntu 16.04
å…¬é–‹ãƒãƒ¼ãƒˆ|22, 8080-8090


[0]: https://github.com/cloud-hackathon/golang-apps
[1]: https://github.com/
[2]: http://www.ntt.com/business/services/cloud/iaas/cloudn.html
[3]: https://github.com/join?source=header-home
[4]: https://github.com/settings/tokens
[5]: https://git-scm.com
[6]: https://ja.wikipedia.org/wiki/%E3%83%AA%E3%83%BC%E3%83%8A%E3%82%B9%E3%83%BB%E3%83%88%E3%83%BC%E3%83%90%E3%83%AB%E3%82%BA
[7]: http://www.backlog.jp/git-guide/
[8]: https://www.amazon.co.jp/dp/B01IGW562K/
[9]: http://nvie.com/posts/a-successful-git-branching-model/
[10]: https://github.com/cloud-hackathon/javascript-apps
[11]: https://thinkit.co.jp/story/2015/08/11/6285
[12]: http://cn.teldevice.co.jp/column/detail/id/102
[13]: https://www.docker.com
[14]: https://thinkit.co.jp/story/2015/08/05/6284
[15]: http://www.slideshare.net/zembutsu/docker-images-containers-and-lifecycle
[16]: https://docs.docker.com/compose/
[17]: https://blog.docker.com/2016/02/containers-as-a-service-caas/
[18]: http://www.vmware.com/products/player/playerpro-evaluation.html
[19]: https://www.virtualbox.org
[20]: https://www.ubuntu.com
[21]: https://ja.wikipedia.org/wiki/YAML
[22]: https://github.com/cloud-hackathon/ruby-apps
[23]: https://github.com/cloud-hackathon/python-apps
